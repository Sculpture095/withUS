<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <!-- Bootstrap icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <!-- Google fonts-->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,wght@0,600;1,600&amp;display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,300;0,500;0,600;0,700;1,300;1,500;1,600;1,700&amp;display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,400;1,400&amp;display=swap" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="../../css/main.css" rel="stylesheet" />
    <link href="../../css/p_myPage.css" rel="stylesheet" />
    <title>포트폴리오 상세 페이지</title>
</head>
<body>
    <!-- Header -->
    <div id="header"></div>

    <div class="wrapper">
        <div class="mypage_container">
            <div class="sidebar_content">
                <div class="profile_box items-center">
                    <div class="user_img_box"><a href="img"></a></div>
                    <button class="grade">등급</button>
                    <div class="user_text">
                        <h2>유저아이디</h2>
                        <p>user1@naver.com</p>
                    </div>
                </div>
                 <!-- Sidebar -->
                <div class="sidebar_menu">
                  <ul class="mt-8 space-y-4">
                      <li>    
                          <a href="p_myPage.html" class="flex justify-between items-center textdeco">
                              <span>개인정보 관리</span>
                              <span>&gt;</span>
                          </a>
                      </li>
                      <li>
                          <a href="p_project.html"  class="flex justify-between items-center textdeco">
                              <span>프로젝트 관리</span>
                              <span>&gt;</span>
                          </a>
                      </li>
                      <li>
                          <a href="p_skill.html"  class="flex justify-between items-center textdeco">
                              <span>보유기술 관리</span>
                              <span>&gt;</span>
                          </a>
                      </li>
                      <li class="current-page">
                          <a href="p_portfolio.html"  class="flex justify-between items-center textdeco">
                              <span>포트폴리오 관리</span>
                              <span>&gt;</span>
                          </a>
                      </li>
                      <li>
                          <a href="p_history.html" class="flex justify-between items-center textdeco">
                              <span>경력 관리</span>
                              <span>&gt;</span>
                          </a>
                      </li>
                      <li>
                          <a href="p_education.html" class="flex justify-between items-center textdeco">
                              <span>학력 관리</span>
                              <span>&gt;</span>
                          </a>
                      </li>
                      <li>
                          <a href="p_certificate.html" class="flex justify-between items-center textdeco">
                              <span>자격증 관리</span>
                              <span>&gt;</span>
                          </a>
                      </li>
                      <li>
                        <a href="p_account.html" class="flex justify-between items-center textdeco">
                            <span>계좌 관리</span>
                            <span>&gt;</span>
                        </a>
                    </li>
                  </ul>
              </div> 
          </div>

            <!-- Main Content -->
            <div class="content">
                <div class="section">
                  
                    <div class="portfolio_detail_grid">
                        <div class="portfolio_item">
                            <!-- 제목 -->
                            <h2 id="portfolioTitleText" class="portfolio_title">카페스마트오더 시스템 구축, 매출 30% 성장한 K기업</h2>
                            <input type="text" id="portfolioTitleInput" class="portfolio_title input_field" style="display: none;">
                    
                            <!-- 내용 -->
                            <p id="portfolioDescriptionText" class="portfolio_description">포트폴리오 내용이 여기에 들어갑니다. 프로젝트의 설명을 자세히 적어주세요.</p>
                            <textarea id="portfolioDescriptionInput" class="portfolio_description input_field" style="display: none;"></textarea>
                    
                            <!-- 파일선택(기본적으로 숨김) -->
                            <div class="image_upload_container file-input-container" style="display: none;">
                                <input type="file" id="imageUpload" class="image_upload" accept="image/*" multiple>
                            </div>

                            <!-- 이미지 미리보기 영역 -->
                        <div class="portfolio_image" id="portfolioImageContainer">
                            <!-- 기존 이미지 유지 -->
                            <div class="image_item">
                                <img src="../../img/test_img.png" alt="포트폴리오 이미지">
                                <button class="delete_img_btn" onclick="deleteImage(this)">X</button>
                            </div>
                        </div>

                            <div class="portfolio_buttons">
                                <button class="btn edit_btn" onclick="enableEditing()">수정</button>
                                <button class="btn delete_btn" id="deleteButton" onclick="deletePortfolio()">삭제</button>
                                <button class="btn save_btn" onclick="saveChanges()" style="display: none;">저장</button>
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> <!-- wrapper -->

     
  <!-- footer -->
  <div id="footer"></div>
  <script src="../../js/header_footer.js"></script>
  <script src="../../js/script.js"></script> 
  <script>
    function enableEditing() {
        // 제목 및 내용 숨기기 & 입력 필드 보이기
        document.getElementById("portfolioTitleText").style.display = "none";
        document.getElementById("portfolioDescriptionText").style.display = "none";
    
        document.getElementById("portfolioTitleInput").style.display = "block";
        document.getElementById("portfolioDescriptionInput").style.display = "block";
    
        // 기존 제목/내용을 입력 필드에 넣기
        document.getElementById("portfolioTitleInput").value = document.getElementById("portfolioTitleText").innerText;
        document.getElementById("portfolioDescriptionInput").value = document.getElementById("portfolioDescriptionText").innerText;
    
        // 이미지 업로드 필드 보이기
        document.querySelector(".image_upload_container").style.display = "block";
    
        // X 버튼 보이기
        document.querySelectorAll(".delete_img_btn").forEach(button => {
            button.style.display = "flex";
        });
    
        // 이미지 컨테이너를 수정 모드로 변경 (작은 이미지 여러 장 배치)
        document.getElementById("portfolioImageContainer").classList.add("editing");
    
        // 삭제 버튼 숨기기
        document.getElementById("deleteButton").style.display = "none";
    
        // 버튼 변경 (수정 → 저장)
        document.querySelector(".edit_btn").style.display = "none";
        document.querySelector(".save_btn").style.display = "inline-block";
    }
    
    function saveChanges() {
        // 입력 필드에서 수정된 값 가져오기
        let newTitle = document.getElementById("portfolioTitleInput").value;
        let newDescription = document.getElementById("portfolioDescriptionInput").value;
    
        // 제목 및 내용 다시 적용
        document.getElementById("portfolioTitleText").innerText = newTitle;
        document.getElementById("portfolioDescriptionText").innerText = newDescription;
    
        // 입력 필드 숨기기 & 텍스트 다시 보이기
        document.getElementById("portfolioTitleText").style.display = "block";
        document.getElementById("portfolioDescriptionText").style.display = "block";
    
        document.getElementById("portfolioTitleInput").style.display = "none";
        document.getElementById("portfolioDescriptionInput").style.display = "none";
    
        // 이미지 업로드 필드 숨기기
        document.querySelector(".image_upload_container").style.display = "none";
    
        // X 버튼 숨기기
        document.querySelectorAll(".delete_img_btn").forEach(button => {
            button.style.display = "none";
        });
    
        // 이미지 컨테이너에서 수정 모드 해제 (다시 큰 이미지로 표시)
        document.getElementById("portfolioImageContainer").classList.remove("editing");
    
        // 삭제 버튼 다시 보이기
        document.getElementById("deleteButton").style.display = "inline-block";
    
        // 버튼 변경 (저장 → 수정)
        document.querySelector(".edit_btn").style.display = "inline-block";
        document.querySelector(".save_btn").style.display = "none";
    }
    


    //포트폴리오 삭제 기능
    function deletePortfolio() {
        let confirmDelete = confirm("포트폴리오를 삭제하시겠습니까?");
        
        if (confirmDelete) {
            // 삭제된 포트폴리오를 로컬 스토리지 또는 서버 DB에서 제거하는 로직 추가 가능
            let portfolioId = document.getElementById("portfolioTitleText").innerText; // 예제 ID 값
    
            // 로컬 스토리지에서 삭제된 항목으로 저장 (데이터베이스 사용 시 AJAX 요청 필요)
            let deletedPortfolios = JSON.parse(localStorage.getItem("deletedPortfolios")) || [];
            deletedPortfolios.push(portfolioId);
            localStorage.setItem("deletedPortfolios", JSON.stringify(deletedPortfolios));
    
            alert("삭제되었습니다.");
            window.location.href = "p_portfolio.html"; // 삭제 후 페이지 이동
        }
    }
    


    
    // 이미지 업로드 기능 (여러 장 가능 & 기존 이미지 유지)
    document.getElementById("imageUpload").addEventListener("change", function(event) {
        let files = event.target.files;
        let imageContainer = document.getElementById("portfolioImageContainer");
    
        for (let i = 0; i < files.length; i++) {
            let file = files[i];
            let reader = new FileReader();
    
            reader.onload = function(e) {
                // 새로운 이미지 요소 생성
                let newImage = document.createElement("div");
                newImage.classList.add("image_item");
                newImage.innerHTML = `
                    <img src="${e.target.result}" alt="포트폴리오 이미지">
                    <button class="delete_img_btn" onclick="deleteImage(this)">X</button>
                `;
                imageContainer.appendChild(newImage);
            };
            reader.readAsDataURL(file);
        }
    });
    
    // 개별 이미지 삭제 기능
    function deleteImage(button) {
        button.parentElement.remove();
    }
    
    
  </script>
</body>
</html>