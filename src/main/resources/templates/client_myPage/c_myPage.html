<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,wght@0,600;1,600&amp;display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,300;0,500;0,600;0,700;1,300;1,500;1,600;1,700&amp;display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,400;1,400&amp;display=swap" rel="stylesheet"/>
    <link href="../../css/main.css" rel="stylesheet"/>
    <link href="../../css/c_myPage.css" rel="stylesheet"/>
    <title>클라이언트 마이페이지</title>
</head>
<body>

<!-- Header -->
<div th:replace="~{header :: header}"></div>

<div class="wrapper">
    <div class="mypage_container">
        <div class="sidebar_content">
            <div class="profile_box items-center">
                <div class="user_img_box"><a href="img"></a></div>
<!--                <button class="grade">등급</button>-->
                <div class="user_text">
                    <h2>유저아이디</h2>
                    <p>user1@naver.com</p>
                </div>
            </div>
            <!-- Sidebar -->
            <div class="sidebar_menu">
                <ul class="mt-8 space-y-4">
                    <li class="current-page">
                        <a href="c_myPage.html" class="flex justify-between items-center textdeco">
                            <span>개인정보 관리</span>
                            <span>&gt;</span>
                        </a>
                    </li>
                    <li>
                        <a href="c_project.html"  class="flex justify-between items-center textdeco">
                            <span>프로젝트 관리</span>
                            <span>&gt;</span>
                        </a>
                    </li>
                    <li>
                        <a href="c_account.html" class="flex justify-between items-center textdeco">
                            <span>계좌 관리</span>
                            <span>&gt;</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        <div class="content">
            <!-- 클라이언트 소개 -->
            <div class="section">
                <h3>클라이언트 소개</h3>
                <div class="info-text" id="infoText">
                    <span id="displayText" th:text="${myPage.introduce != null ? myPage.introduce : '정보를 입력하세요'}">정보를 입력하세요</span>
                    <textarea id="editTextArea" style="display: none;" placeholder="클라이언트 소개를 입력하세요"></textarea>
                </div>
                <button class="btn" id="editButton">수정</button>
                <button class="btn" id="saveButton" style="display: none;">저장</button>
            </div>

            <!-- 클라이언트 정보 -->
            <div class="section">
                <h3>클라이언트 정보</h3>
                <div class="info" id="infoSection">
                    <div>
                        <span>이름</span>
                        <span id="name" th:text="${member.name != null ? member.name : '정보를 입력하세요'}"></span>
                        <!-- <input type="text" id="editName" style="display: none; width: 250px; height: 23px;  float: right;" placeholder="정보를 입력하세요"> -->
                    </div>
                    <div>
                        <span>닉네임</span>
                        <span id="nickname" th:text="${member.nickname != null ? member.nickname : '정보를 입력하세요'}"></span>
                        <input type="text" id="editNickname" style="display: none; width: 250px; height: 23px; float: right;" placeholder="정보를 입력하세요">
                    </div>
                    <div>
                        <span>생년월일</span>
                        <span id="birthdate" th:text="${myPage.birth != null ? myPage.birth : '정보를 입력하세요'}"></span>
                        <!-- <input type="date" id="editBirthdate" style="display: none;"> -->
                    </div>
                    <div>
                        <span>사업자번호</span>
                        <span id="businessNumber" th:text="${myPage.businessNum != null ? myPage.businessNum : '정보를 입력하세요'}"></span>
                        <input type="text" id="editBusinessNumber" style="display: none; width: 250px; height: 23px; float: right;" placeholder="정보를 입력하세요">
                    </div>
                    <div>
                        <span>주소</span>
                        <span id="address" th:text="${myPage.address != null ? myPage.address : '정보를 입력하세요'}"></span>
                        <input type="text" id="editAddress" style="display: none; width: 250px; height: 23px; float: right;" placeholder="정보를 입력하세요">
                    </div>
                    <div>
                        <span>우편번호</span>
                        <span id="postalCode" th:text="${myPage.address != null ? myPage.address : '정보를 입력하세요'}"></span>
                        <input type="text" id="editPostalCode" style="display: none; width: 250px; height: 23px; float: right;" placeholder="정보를 입력하세요">
                    </div>
                </div>
                <button class="btn" id="editInfoButton">수정</button>
                <button class="btn" id="saveInfoButton" style="display: none;">저장</button>
            </div>
        </div>
    </div>
</div>

<!-- Footer -->
    <div  th:replace="~{footer :: footer}"></div>

<script src="/js/header_footer.js"></script>
<script src="/js/script.js"></script>



<script>


    // 클라이언트 소개 수정 기능
    const editButton = document.getElementById("editButton");
    const saveButton = document.getElementById("saveButton");
    const displayText = document.getElementById("displayText");
    const editTextArea = document.getElementById("editTextArea");

    editButton.onclick = function() {
        displayText.style.display = "none";
        editTextArea.style.display = "block";
        editTextArea.value = displayText.innerText.trim();
        editButton.style.display = "none";
        saveButton.style.display = "inline";
    }

    saveButton.onclick = function() {
        displayText.innerText = editTextArea.value.trim();
        displayText.style.display = "inline";
        editTextArea.style.display = "none";
        editButton.style.display = "inline";
        saveButton.style.display = "none";
    }

    // 클라이언트 정보 수정 기능
    const editInfoButton = document.getElementById("editInfoButton");
    const saveInfoButton = document.getElementById("saveInfoButton");

    editInfoButton.onclick = function() {
        document.querySelectorAll('.info div').forEach((div) => {
            const span = div.querySelector('span:nth-child(2)');
            const input = div.querySelector('input');

            if (span && input) {
                span.style.display = "none";
                input.style.display = "block";
                input.value = span.innerText.trim() === "정보를 입력하세요" ? "" : span.innerText.trim();
                input.placeholder = span.innerText.trim() === "정보를 입력하세요" ? input.placeholder : span.innerText;
            }
        });
        editInfoButton.style.display = "none";
        saveInfoButton.style.display = "inline";
    }

    saveInfoButton.onclick = function() {
        document.querySelectorAll('.info div').forEach((div) => {
            const span = div.querySelector('span:nth-child(2)');
            const input = div.querySelector('input, select');

            if (span && input) {
                span.innerText = input.value.trim() === "" ? "정보를 입력하세요" : input.value;
                span.style.display = "inline";
                input.style.display = "none";
            }
        });
        editInfoButton.style.display = "inline";
        saveInfoButton.style.display = "none";
    }


</script>

</body>
</html>
